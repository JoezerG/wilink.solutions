---
import HomeLayout from "../layouts/homeLayout.astro";
import { sortPostByDate, formatDate } from "../utils/commons";
import type { PostMetada } from "../utils/interfaces";
const posts = await Astro.glob<PostMetada>("../pages/**/*.md");
const postsSorted = posts.sort(sortPostByDate);
---

<style lang="scss">
  a {
    text-decoration: none;
    &:hover {
      text-decoration: underline;
      text-decoration-color: var(--primary-color);
    }
    small {
      font-size: 1.8rem;
      color: white;
      display: block;
    }

    .tags {
      margin-top: 20px;
      span {
        padding: 0.3rem 0.8rem;
        background-color: var(--primary-color);
        border-radius: 4px;
        color: white;
      }
    }
  }
</style>

<HomeLayout>
  <div class="section-title line">
    <h2 class="secondary">Ãšltimas entradas</h2>
  </div>
  <section>
    {
      postsSorted.map(({ url, frontmatter: { title, date } }) => {
        const type = url.includes("solutions") ? "Solucion" : "Articulo";
        return (
          <a href={url}>
            <div>
              <h2 class="primary">{title}</h2>
            </div>
            <small>{formatDate(date)}</small>
            <div class="tags">
              <span>{type}</span>
            </div>
          </a>
        );
      })
    }
  </section>
</HomeLayout>
